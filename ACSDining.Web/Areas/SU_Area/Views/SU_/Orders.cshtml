@{
    ViewBag.Title = "Orders";
}
<div class="panel panel-default" id="mfwPanel">

    <table class="table table-striped table-bordered fixed  table-hover" id="ordesTable">

        <thead>
        <tr>
            <th style="text-align: center" colspan="7">
                <div class="radio-btn">
                    <!--ko foreach: PlanFactValues-->
                    <input type="radio" style="margin: 5px;" data-bind="checked: $parent.ItsFact, checkedValue: $data, click: $parent.changeSelected, attr:{id: 'dbc' + $index(),name: 'dbc' + $index()}"/>
                    <label data-bind=" attr:{'for': 'dbc' + $index()},text:$index()%2==0?'Фактические  &nbsp;&nbsp;&nbsp; ':'Плановые'" style="color: #54ECD2; font-size: 18px; margin: 5px;"></label>
                    <!--/ko-->
                </div>
            </th>
            <th style="text-align: center" data-bind="attr:{colspan: (WeekDishPrices().length+3)/3}"></th>
            <th style="text-align: center" data-bind="attr:{colspan: (WeekDishPrices().length+3)/3}"></th>
        </tr>
        <tr>
            <th rowspan="4"><span>№</span></th>
            <th rowspan="4" style="text-align: center"><span>Ф.И.О</span></th>
            <!--ko foreach: DaysOfWeek-->
            <th colspan="4" style="text-align: center"><span data-bind="text:$data"></span></th>
            <!--/ko-->
            <th rowspan="4" style="text-align: center"><span>Стоимость заказа за неделю</span></th>
        </tr>
        <tr data-bind="foreach: DaysOfWeek" id="groups">
            <!--ko foreach: $root.Categories-->
            <th class="rotate">
                <span class="intact" data-bind="text: $data"></span>
            </th>
            <!--/ko-->
        </tr>
        <tr>
            <th style="text-align: center" data-bind="attr:{colspan: WeekDishPrices().length}"><span>Цена за одну порцию, грн</span></th>
        </tr>
        <tr>
            <!--ko foreach: WeekDishPrices-->
            <th><span data-bind="text: $data.toFixed(2)"></span></th>
            <!--/ko-->
        </tr>
        </thead>
        <tbody>
        <!--ko foreach: pagedList-->
        <tr>
            <td>
                <span data-bind="text: $root.pageIndex() * $root.pageSize() + $index() + 1"></span>
            </td>
            <td class="rights"><span data-bind="text: UserName"></span></td>

            <!--ko foreach: UserWeekOrderDishes-->
            <td class="orderquant" data-bind="singleClick: function(){$data.clicked($element)}, event : { mouseenter: onmouseenter , mouseleave:function(){$data.onFocusOut(); if($data.beenChanged()){$root.BeenChanged(true); $root.update($parent,$index()+1,$data.Quantity()); } }}">
                <!--ko ifnot: $root.SUCanChangeOrder-->
                <span data-bind="text: Quantity"></span>
                <!--/ko-->
                <!--ko if: $root.SUCanChangeOrder-->
                <!--ko ifnot: $data.isEditMode()-->
                <span data-bind="text: Quantity"></span>
                <!--/ko-->
                <!-- ko if: $data.isEditMode() -->
                <!-- ko if: ($index() % 4 === 0) -->
                <select class="input-small" data-bind="options: $root.FirstCourseValues, value: Quantity"></select>
                <!--/ko-->
                <!-- ko ifnot: ($index() % 4 === 0) -->
                <select class="input-small" data-bind="options: $root.QuantValues, value: Quantity"></select>
                <!--/ko-->
                <!--/ko-->
                <!--/ko-->
            </td>
            <!--/ko-->

            <th style="text-align: center"><span data-bind="text: WeekSummaryPrice"></span></th>
        </tr>
        <!--/ko-->
        <tr>
            <th style="text-align: center" colspan="2">Всего заказано</th>
            <!--ko foreach: SummaryDishQuantities-->
            <th><span data-bind="text: $data"></span></th>
            <!--/ko-->
            <th></th>
        </tr>
        <tr>
            <td colspan="6">
                <button type="button" class="btn btn-default btn-circle" data-bind="click: previousPage, css:{disabled: pageIndex() === 0}">
                    <span class="glyphicon glyphicon-hand-left"> Предыдущая</span>
                </button>
            </td>
            <td data-bind="attr:{colspan:($root.DaysOfWeek().length*$root.Categories().length-15)}">
                <div style="text-align: center">
                    <span class="glyphicon ">Страница </span>
                    <span class="label-info " data-bind=" text: pageIndex()+1"></span>
                    <span> из </span>
                    <span class="label-info" data-bind=" text: maxPageIndex()+1"></span>
                </div>
            </td>
            <td colspan="6">
                <button type="button" class="btn btn-default btn-circle" data-bind="click: nextPage, css:{disabled: pageIndex() === maxPageIndex()}" style="float: left">
                    <span class="glyphicon glyphicon-hand-right">Следующая</span>
                </button>
            </td>
            <td colspan="6">
                <div>
                    <span> Отображать </span>
                    <select class="input-sm" data-bind="options: $root.PageSizes, value: pageSize"></select>
                    <span> элементов на странице</span>
                </div>
            </td>
        </tr>
        </tbody>
    </table>
</div>
<div id="modalMessage" class="modal">
    
    <div class="modal-dialog">
        <div class="panel panel-default">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 data-bind="text: Title"></h1>
                </div>
                <div class="modal-body">
                    <span data-bind="text: Message"></span>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default" data-dismiss="modal">Закрыть</button>
                </div>
            </div>
        </div>
    </div>
</div>
            @Scripts.Render("~/bundles/WeekOrders")
           
