@{
    ViewBag.Title = "Dishes";
}


<div class="row">
    <div class="col-md-9 col-xs-offset-3">
        <div class="col-md-9" >
            <div class="input-group date" style="padding-bottom: 10px">
                <button type="button" class="btn-lg btn-success" style="height: 30px; padding: 1px 16px;" data-bind="click: createPrepare">
                    <span class="glyphicon glyphicon-plus" data-bind="text: ' Добавить ' + SelectedCategory()" style=" padding-bottom: 5px;"></span>
                </button>
            </div>
        </div>
       
    </div>
</div>
    <div class="row">
        <div class="col-xs-4 col-md-11 pull-left " style="padding-left: 50px">
            <div class="panel panel-default" id="mfwPanel">
                <table style="height: 40px;">
                    <tbody>
                    <tr style="background: #565659;">
                        <!-- ko foreach: Categories-->
                        <td style="text-align: center">
                            <div class="radio-btn">
                                <input type="radio" data-bind="checked: $parent.SelectedCategory,checkedValue : $data, click: $parent.changeSelected, attr:{id: 'rc' + $index(),name: 'rc' + $index()}"/>
                                <label data-bind="text:$data, attr:{'for': 'rc' + $index()}" style="color: #54ECD2; font-size: 18px;"></label>
                            </div>
                        </td>
                        <!--/ko-->
                    </tr>
                    </tbody>
                </table>
                <table class="table table-striped table-bordered table-condensed table-hover" id="updateTable" style="table-layout: fixed">
                    <colgroup>
                        <col class="col-md-1">
                        <col class="col-md-4">
                        <col class="col-md-2">
                        <col class="col-md-5">
                    </colgroup>
                    <thead>
                    <tr>
                        <th >№</th>
                        <th >Название</th>
                        <th style="text-align: center">Стоимость</th>
                        <th>Описание</th>
                        @*<th class="col-sm-2" style="text-align: center"><span>Удалить</span></th>*@
                    </tr>
                    </thead>
                    <tbody data-bind="foreach:pagedList">
                    <tr>
                        <td data-bind="hover: isHovering,  css: { menu_hover : isHovering}, click: function(){$root.updatePrepare($data);}">
                            <span data-bind="text: $parent.pageIndex() * $parent.pageSize() + $index() + 1"></span>
                        </td>
                        <td data-bind="hover: isHovering,  css: { menu_hover : isHovering}, click: function(){$root.updatePrepare($data);}">
                            <span data-bind="text:Title"></span>
                        </td>
                        <td  data-bind="hover: isHovering,  css: { menu_hover : isHovering}, click: function(){$root.updatePrepare($data);}">
                            <span data-bind="text:Price"></span>
                        </td>
                        <td data-bind="hover: isHovering,  css: { menu_hover : isHovering}, click: function(){$root.updatePrepare($data);}">
                            <span data-bind="text:Description"></span>
                        </td>
                        @*<td style="vertical-align: middle; text-align: center">
                            <button type="button" class="btn btn-default btn-circle" data-bind="click: function(){ $parent.remove($data)} ">
                                <span class=" glyphicon glyphicon-trash"></span>
                            </button>
                        </td>*@
                    </tr>
                    </tbody>

                </table>
                <table>
                    <colgroup>
                        <col class="col-md-2">
                        <col class="col-md-8">
                        <col class="col-md-2">
                    </colgroup>
                    <tbody>
                    <tr>
                        <td >
                            <button type="button" class="btn btn-default btn-circle" data-bind="click: previousPage, css:{disabled: pageIndex() === 0}">
                                <span class="glyphicon glyphicon-hand-left"> Предыдущая</span>
                            </button>
                        </td>
                        <td >
                            <div>
                                <div style="text-align: center">
                                    <ul class="pagination pagination-lg">
                                        <li data-bind=" foreach: allPages">
                                            <button type="button" class="btn btn-default btn-circle" data-bind=" click: function() { $parent.moveToPage($data.pageNumber-1)  }, css: { active: $data.pageNumber === ($parent.pageIndex() + 1) }">
                                                <span class="glyphicon" data-bind="text: $data.pageNumber"></span>
                                            </button>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </td>
                        <td >
                            <button type="button" class="btn btn-default btn-circle" data-bind="click: nextPage, css:{disabled: pageIndex() === maxPageIndex()}">
                                <span class="glyphicon glyphicon-hand-right"> Следующая</span>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

</div>
<div id="modalbox" class="modal ">
    <div class="modal-dialog">
        <div class="panel panel-default">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 data-bind="text: ModalTitle() + ' '+ SelectedCategory()"> </h1>
                </div>
                <div class="modal-body" data-bind="with: ChangingDish">
                    <table class="table table-condensed table-striped table-bordered pre-scrollable">
                        <tbody>
                        <tr>
                            <td>
                                <span> Название</span>
                            </td>
                            <td>
                                <textarea id="titleID" data-bind="value: Title"></textarea>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span> Описание</span>
                            </td>
                            <td>
                                <textarea id="descrID" data-bind="value: Description"></textarea>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <span> Стоимость</span>
                            </td>
                            <td>
                                <input type="text" id="priceID" data-bind="value: formattedPrice" />
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" data-bind="click: create">Добавить</button>
                    <button class="btn btn-default" data-dismiss="modal">Отмена</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="modalUpdate" class="modal ">
    <div class="modal-dialog">
        <div class="panel panel-default">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 data-bind="text: ModalTitle() + ' '+ SelectedCategory()"> </h1>
                </div>
                <div class="modal-body" data-bind="with: ChangingDish">
                    <table class="table table-condensed table-striped table-bordered pre-scrollable">
                        <tbody>
                            <tr>
                                <td>
                                    <span> Название</span>
                                </td>
                                <td>
                                    <textarea  data-bind="value: Title"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span> Описание</span>
                                </td>
                                <td>
                                    <textarea  data-bind="value: Description"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <span> Стоимость</span>
                                </td>
                                <td>
                                    <input type="text" data-bind=" value: formattedPrice" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" data-bind="click: update">Применить</button>
                    <button class="btn btn-default" data-dismiss="modal">Отмена</button>
                </div>
            </div>
        </div>
    </div>
</div>
@Scripts.Render("~/bundles/DishInfo")

